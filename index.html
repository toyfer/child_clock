<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>子供向けアナログ時計</title>
  <!-- SEO & OGP for GitHub Pages -->
  <meta name="description" content="子供向けの楽しいアナログ時計学習アプリ。GitHub Pagesで公開。" />
  <meta property="og:title" content="こどもアナログとけい" />
  <meta property="og:description" content="子供向けの楽しいアナログ時計学習アプリ。" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="assets/ogp.png" />
  <meta property="og:url" content="https://<YOUR_GITHUB_USERNAME>.github.io/child_clock/" />
  <link rel="canonical" href="https://<YOUR_GITHUB_USERNAME>.github.io/child_clock/" />
  <!-- Favicon for GitHub Pages -->
  <link rel="icon" href="assets/favicon.ico" />
  <!-- PWA manifest (optional) -->
  <link rel="manifest" href="assets/manifest.json" />
  <meta name="theme-color" content="#ffb300" />
  <link rel="apple-touch-icon" href="assets/favicon.ico" />
  <link rel="stylesheet" href="assets/style.css" />
  <script>
    // PWA: Service Worker登録
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function() {
        navigator.serviceWorker.register('./service-worker.js').catch(function(e){
          console.warn('SW registration failed:', e);
        });
      });
    }
  </script>
</head>
<body>
  <div class="title">こどもアナログとけい</div>
  <div class="desc" id="desc" aria-live="polite">じかんを たのしく おぼえよう！</div>
  <button id="theme-btn" aria-label="テーマ切替" title="テーマ切替" style="margin-left:1em;">テーマ切替</button>
  <div id="clock" role="img" aria-label="アナログ時計"></div>
  <script src="simple-clock.js"></script>
  <script>
    /**
     * 星の装飾をランダムにbodyへ追加する
     * @param {number} count - 追加する星の数
     * 前提条件: body要素が存在すること
     * 事後条件: bodyに.starクラスのdivがcount個追加される
     */
    function addRandomStars(count) {
      const body = document.body;
      if (!body) return;
      for (let i = 0; i < count; i++) {
        const star = document.createElement('div');
        star.className = 'star';
        star.textContent = '★';
        star.style.left = (10 + Math.random() * 80) + 'vw';
        star.style.top = (5 + Math.random() * 85) + 'vh';
        star.style.transform = `rotate(${Math.random()*360}deg)`;
        body.appendChild(star);
      }
    }
    addRandomStars(8);

    /**
     * テーマ切替ボタンの初期化・イベント登録
     * 前提条件: #theme-btn, #descが存在
     * 事後条件: ボタン押下でテーマが切り替わる
     */
    function setupThemeToggle() {
      const themeBtn = document.getElementById('theme-btn');
      const desc = document.getElementById('desc');
      if (!themeBtn || !desc) return;
      let dark = false;
      themeBtn.onclick = function() {
        dark = !dark;
        if (dark) {
          document.body.style.background = 'linear-gradient(135deg, #232526 0%, #414345 100%)';
          document.body.style.color = '#fff';
          desc.style.color = '#eee';
          themeBtn.textContent = 'ライトテーマ';
        } else {
          document.body.style.background = 'linear-gradient(135deg, #fceabb 0%, #f8b500 100%)';
          document.body.style.color = '';
          desc.style.color = '#555';
          themeBtn.textContent = 'ダークテーマ';
        }
      };
      themeBtn.textContent = 'ダークテーマ';
    }
    setupThemeToggle();
  </script>
</body>
</html>
